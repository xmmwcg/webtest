/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jun 7 13:56
*/
KISSY.add("xtemplate/compiler/parser",function(){var h={},a=KISSY,i=function(b){this.rules=[];a.mix(this,b);this.resetInput(this.input)};i.prototype={constructor:function(b){this.rules=[];a.mix(this,b);this.resetInput(this.input)},resetInput:function(b){a.mix(this,{input:b,matched:"",stateStack:[i.STATIC.INITIAL],match:"",text:"",firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var b=this.stateStack[this.stateStack.length-1],d=[],b=this.mapState(b);a.each(this.rules,
function(g){var e=g.state||g[3];e?a.inArray(b,e)&&d.push(g):b==i.STATIC.INITIAL&&d.push(g)});return d},pushState:function(b){this.stateStack.push(b)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var b=i.STATIC.DEBUG_CONTEXT_LIMIT,d=this.matched,g=this.match,a=this.input,d=d.slice(0,d.length-g.length),d=(d.length>b?"...":"")+d.slice(-b).replace(/\n/," "),g=g+a,g=g.slice(0,b)+(g.length>b?"...":"");return d+g+"\n"+Array(d.length+
1).join("-")+"^"},mapSymbol:function(b){var d=this.symbolMap;return!d?b:d[b]||(d[b]=++this.symbolId)},mapReverseSymbol:function(b){var d=this.symbolMap,g,a=this.reverseSymbolMap;if(!a&&d)for(g in a=this.reverseSymbolMap={},d)a[d[g]]=g;return a?a[b]:b},mapState:function(b){var d=this.stateMap;return!d?b:d[b]||(d[b]=++this.stateId)},lex:function(){var b=this.input,d,g,e,p=this.getCurrentRules();this.match=this.text="";if(!b)return this.mapSymbol(i.STATIC.END_TAG);for(d=0;d<p.length;d++){g=p[d];var h=
g.token||g[0];e=g.action||g[2]||void 0;if(g=b.match(g.regexp||g[1])){if(d=g[0].match(/\n.*/g))this.lineNumber+=d.length;a.mix(this,{firstLine:this.lastLine,lastLine:this.lineNumber+1,firstColumn:this.lastColumn,lastColumn:d?d[d.length-1].length-1:this.lastColumn+g[0].length});d=this.match=g[0];this.matches=g;this.text=d;this.matched+=d;e=e&&e.call(this);e=void 0==e?h:this.mapSymbol(e);this.input=b=b.slice(d.length);return e?e:this.lex()}}}};i.STATIC={INITIAL:"I",DEBUG_CONTEXT_LIMIT:20,END_TAG:"$EOF"};
var e=new i({rules:[[0,/^(\\[\s\S]|[\s\S])*?(?={{)/,function(){var b=this.text,d,g=0;if(d=b.match(/\\+$/))g=d[0].length;g%2?(b=b.slice(0,-1),this.pushState("et")):this.pushState("t");this.text=b;return"CONTENT"}],[2,/^[\s\S]+/,0],[2,/^[\s\S]{2,}?(?:(?={{)|$)/,function(){this.popState()},["et"]],[3,/^{{(?:#|@|\^)/,0,["t"]],[4,/^{{\//,0,["t"]],[5,/^{{\s*else/,0,["t"]],[6,/^{{{/,0,["t"]],[0,/^{{![\s\S]*?}}/,function(){this.popState()},["t"]],[2,/^{{%([\s\S]*?)%}}/,function(){this.text=this.matches[1]||
"";this.popState()},["t"]],[7,/^{{/,0,["t"]],[0,/^\s+/,0,["t"]],[8,/^}}}/,function(){this.popState()},["t"]],[8,/^}}/,function(){this.popState()},["t"]],[9,/^\(/,0,["t"]],[10,/^\)/,0,["t"]],[11,/^\|\|/,0,["t"]],[12,/^&&/,0,["t"]],[13,/^===/,0,["t"]],[14,/^!==/,0,["t"]],[15,/^>/,0,["t"]],[16,/^>=/,0,["t"]],[17,/^</,0,["t"]],[18,/^<=/,0,["t"]],[19,/^\+/,0,["t"]],[20,/^-/,0,["t"]],[21,/^\*/,0,["t"]],[22,/^\//,0,["t"]],[23,/^%/,0,["t"]],[24,/^!/,0,["t"]],[25,/^"(\\"|[^"])*"/,function(){this.text=this.text.slice(1,
-1).replace(/\\"/g,'"')},["t"]],[25,/^'(\\'|[^'])*'/,function(){this.text=this.text.slice(1,-1).replace(/\\'/g,"'")},["t"]],[26,/^true/,0,["t"]],[26,/^false/,0,["t"]],[27,/^\d+(?:\.\d+)?(?:e-?\d+)?/i,0,["t"]],[28,/^=/,0,["t"]],[29,/^\.(?=})/,0,["t"]],[29,/^\.\./,function(){this.pushState("ws")},["t"]],[30,/^\//,function(){this.popState()},["ws"]],[30,/^\./,0,["t"]],[31,/^\[/,0,["t"]],[32,/^\]/,0,["t"]],[29,/^[a-zA-Z0-9_$-]+/,0,["t"]],[33,/^./,0,["t"]]]});h.lexer=e;e.symbolMap={$EOF:1,CONTENT:2,OPEN_BLOCK:3,
OPEN_END_BLOCK:4,OPEN_INVERSE:5,OPEN_UN_ESCAPED:6,OPEN:7,CLOSE:8,LPAREN:9,RPAREN:10,OR:11,AND:12,LOGIC_EQUALS:13,LOGIC_NOT_EQUALS:14,GT:15,GE:16,LT:17,LE:18,PLUS:19,MINUS:20,MULTIPLY:21,DIVIDE:22,MODULUS:23,NOT:24,STRING:25,BOOLEAN:26,NUMBER:27,EQUALS:28,ID:29,SEP:30,REF_START:31,REF_END:32,INVALID:33,$START:34,program:35,statements:36,inverse:37,statement:38,openBlock:39,closeBlock:40,tpl:41,inTpl:42,path:43,Expression:44,params:45,hash:46,param:47,ConditionalOrExpression:48,ConditionalAndExpression:49,
EqualityExpression:50,RelationalExpression:51,AdditiveExpression:52,MultiplicativeExpression:53,UnaryExpression:54,PrimaryExpression:55,hashSegments:56,hashSegment:57,pathSegments:58};h.productions=[[34,[35]],[35,[36,37,36],function(){return new this.yy.ProgramNode(this.lexer.lineNumber,this.$1,this.$3)}],[35,[36],function(){return new this.yy.ProgramNode(this.lexer.lineNumber,this.$1)}],[36,[38],function(){return[this.$1]}],[36,[36,38],function(){this.$1.push(this.$2)}],[38,[39,35,40],function(){return new this.yy.BlockNode(this.lexer.lineNumber,
this.$1,this.$2,this.$3)}],[38,[41]],[38,[2],function(){return new this.yy.ContentNode(this.lexer.lineNumber,this.$1)}],[39,[3,42,8],function(){"^"==this.$1.charAt(this.$1.length-1)&&(this.$2.isInverted=1);return this.$2}],[40,[4,43,8],function(){return this.$2}],[41,[7,42,8],function(){return this.$2}],[41,[6,42,8],function(){this.$2.escaped=!1;return this.$2}],[41,[7,44,8],function(){return new this.yy.TplExpressionNode(this.lexer.lineNumber,this.$2)}],[41,[6,44,8],function(){var b=new this.yy.TplExpressionNode(this.lexer.lineNumber,
this.$2);b.escaped=!1;return b}],[37,[5,8]],[42,[43,45,46],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,this.$2,this.$3)}],[42,[43,45],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,this.$2)}],[42,[43,46],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1,null,this.$2)}],[42,[43],function(){return new this.yy.TplNode(this.lexer.lineNumber,this.$1)}],[45,[45,47],function(){this.$1.push(this.$2)}],[45,[47],function(){return[this.$1]}],[47,
[44]],[44,[48]],[48,[49]],[48,[48,11,49],function(){return new this.yy.ConditionalOrExpression(this.$1,this.$3)}],[49,[50]],[49,[49,12,50],function(){return new this.yy.ConditionalAndExpression(this.$1,this.$3)}],[50,[51]],[50,[50,13,51],function(){return new this.yy.EqualityExpression(this.$1,"===",this.$3)}],[50,[50,14,51],function(){return new this.yy.EqualityExpression(this.$1,"!==",this.$3)}],[51,[52]],[51,[51,17,52],function(){return new this.yy.RelationalExpression(this.$1,"<",this.$3)}],[51,
[51,15,52],function(){return new this.yy.RelationalExpression(this.$1,">",this.$3)}],[51,[51,18,52],function(){return new this.yy.RelationalExpression(this.$1,"<=",this.$3)}],[51,[51,16,52],function(){return new this.yy.RelationalExpression(this.$1,">=",this.$3)}],[52,[53]],[52,[52,19,53],function(){return new this.yy.AdditiveExpression(this.$1,"+",this.$3)}],[52,[52,20,53],function(){return new this.yy.AdditiveExpression(this.$1,"-",this.$3)}],[53,[54]],[53,[53,21,54],function(){return new this.yy.MultiplicativeExpression(this.$1,
"*",this.$3)}],[53,[53,22,54],function(){return new this.yy.MultiplicativeExpression(this.$1,"/",this.$3)}],[53,[53,23,54],function(){return new this.yy.MultiplicativeExpression(this.$1,"%",this.$3)}],[54,[24,54],function(){return new this.yy.UnaryExpression(this.$1)}],[54,[55]],[55,[25],function(){return new this.yy.StringNode(this.lexer.lineNumber,this.$1)}],[55,[27],function(){return new this.yy.NumberNode(this.lexer.lineNumber,this.$1)}],[55,[20,27],function(){return new this.yy.NumberNode(this.lexer.lineNumber,
0-this.$2)}],[55,[26],function(){return new this.yy.BooleanNode(this.lexer.lineNumber,this.$1)}],[55,[43]],[55,[9,44,10],function(){return this.$2}],[46,[56],function(){return new this.yy.HashNode(this.lexer.lineNumber,this.$1)}],[56,[56,57],function(){this.$1.push(this.$2)}],[56,[57],function(){return[this.$1]}],[57,[29,28,44],function(){return[this.$1,this.$3]}],[43,[58],function(){return new this.yy.IdNode(this.lexer.lineNumber,this.$1)}],[58,[58,30,29],function(){this.$1.push(this.$3)}],[58,[58,
31,44,32],function(){this.$1.push(this.$3)}],[58,[58,30,27],function(){this.$1.push(this.$3)}],[58,[29],function(){return[this.$1]}]];h.table={gotos:{"0":{35:5,36:6,38:7,39:8,41:9},2:{42:11,43:12,58:13},3:{42:20,43:21,44:22,48:23,49:24,50:25,51:26,52:27,53:28,54:29,55:30,58:13},4:{42:31,43:21,44:32,48:23,49:24,50:25,51:26,52:27,53:28,54:29,55:30,58:13},6:{37:34,38:35,39:8,41:9},8:{35:36,36:6,38:7,39:8,41:9},12:{43:39,44:40,45:41,46:42,47:43,48:23,49:24,50:25,51:26,52:27,53:28,54:29,55:30,56:44,57:45,
58:13},14:{43:39,44:48,48:23,49:24,50:25,51:26,52:27,53:28,54:29,55:30,58:13},16:{43:39,54:50,55:30,58:13},21:{43:39,44:40,45:41,46:42,47:43,48:23,49:24,50:25,51:26,52:27,53:28,54:29,55:30,56:44,57:45,58:13},34:{36:69,38:7,39:8,41:9},36:{40:71},41:{43:39,44:40,46:73,47:74,48:23,49:24,50:25,51:26,52:27,53:28,54:29,55:30,56:44,57:45,58:13},44:{57:76},47:{43:39,44:79,48:23,49:24,50:25,51:26,52:27,53:28,54:29,55:30,58:13},53:{43:39,49:81,50:25,51:26,52:27,53:28,54:29,55:30,58:13},54:{43:39,50:82,51:26,
52:27,53:28,54:29,55:30,58:13},55:{43:39,51:83,52:27,53:28,54:29,55:30,58:13},56:{43:39,51:84,52:27,53:28,54:29,55:30,58:13},57:{43:39,52:85,53:28,54:29,55:30,58:13},58:{43:39,52:86,53:28,54:29,55:30,58:13},59:{43:39,52:87,53:28,54:29,55:30,58:13},60:{43:39,52:88,53:28,54:29,55:30,58:13},61:{43:39,53:89,54:29,55:30,58:13},62:{43:39,53:90,54:29,55:30,58:13},63:{43:39,54:91,55:30,58:13},64:{43:39,54:92,55:30,58:13},65:{43:39,54:93,55:30,58:13},69:{38:35,39:8,41:9},70:{43:94,58:13},72:{43:39,44:95,48:23,
49:24,50:25,51:26,52:27,53:28,54:29,55:30,58:13}},action:{"0":{2:[1,0,1],3:[1,0,2],6:[1,0,3],7:[1,0,4]},1:{1:[2,7,0],2:[2,7,0],3:[2,7,0],4:[2,7,0],5:[2,7,0],6:[2,7,0],7:[2,7,0]},2:{29:[1,0,10]},3:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},4:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},5:{1:[0,0,0]},6:{1:[2,2,0],2:[1,0,1],3:[1,0,2],4:[2,2,0],5:[1,0,33],6:[1,0,3],7:[1,0,4]},7:{1:[2,3,0],2:[2,3,0],3:[2,3,0],4:[2,3,0],5:[2,
3,0],6:[2,3,0],7:[2,3,0]},8:{2:[1,0,1],3:[1,0,2],6:[1,0,3],7:[1,0,4]},9:{1:[2,6,0],2:[2,6,0],3:[2,6,0],4:[2,6,0],5:[2,6,0],6:[2,6,0],7:[2,6,0]},10:{8:[2,58,0],9:[2,58,0],10:[2,58,0],11:[2,58,0],12:[2,58,0],13:[2,58,0],14:[2,58,0],15:[2,58,0],16:[2,58,0],17:[2,58,0],18:[2,58,0],19:[2,58,0],20:[2,58,0],21:[2,58,0],22:[2,58,0],23:[2,58,0],24:[2,58,0],25:[2,58,0],26:[2,58,0],27:[2,58,0],29:[2,58,0],30:[2,58,0],31:[2,58,0],32:[2,58,0]},11:{8:[1,0,37]},12:{8:[2,18,0],9:[1,0,14],20:[1,0,15],24:[1,0,16],
25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,38]},13:{8:[2,54,0],9:[2,54,0],10:[2,54,0],11:[2,54,0],12:[2,54,0],13:[2,54,0],14:[2,54,0],15:[2,54,0],16:[2,54,0],17:[2,54,0],18:[2,54,0],19:[2,54,0],20:[2,54,0],21:[2,54,0],22:[2,54,0],23:[2,54,0],24:[2,54,0],25:[2,54,0],26:[2,54,0],27:[2,54,0],29:[2,54,0],30:[1,0,46],31:[1,0,47],32:[2,54,0]},14:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},15:{27:[1,0,49]},16:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,
0,18],27:[1,0,19],29:[1,0,10]},17:{8:[2,44,0],9:[2,44,0],10:[2,44,0],11:[2,44,0],12:[2,44,0],13:[2,44,0],14:[2,44,0],15:[2,44,0],16:[2,44,0],17:[2,44,0],18:[2,44,0],19:[2,44,0],20:[2,44,0],21:[2,44,0],22:[2,44,0],23:[2,44,0],24:[2,44,0],25:[2,44,0],26:[2,44,0],27:[2,44,0],29:[2,44,0],32:[2,44,0]},18:{8:[2,47,0],9:[2,47,0],10:[2,47,0],11:[2,47,0],12:[2,47,0],13:[2,47,0],14:[2,47,0],15:[2,47,0],16:[2,47,0],17:[2,47,0],18:[2,47,0],19:[2,47,0],20:[2,47,0],21:[2,47,0],22:[2,47,0],23:[2,47,0],24:[2,47,
0],25:[2,47,0],26:[2,47,0],27:[2,47,0],29:[2,47,0],32:[2,47,0]},19:{8:[2,45,0],9:[2,45,0],10:[2,45,0],11:[2,45,0],12:[2,45,0],13:[2,45,0],14:[2,45,0],15:[2,45,0],16:[2,45,0],17:[2,45,0],18:[2,45,0],19:[2,45,0],20:[2,45,0],21:[2,45,0],22:[2,45,0],23:[2,45,0],24:[2,45,0],25:[2,45,0],26:[2,45,0],27:[2,45,0],29:[2,45,0],32:[2,45,0]},20:{8:[1,0,51]},21:{8:[2,48,0],9:[1,0,14],11:[2,48,0],12:[2,48,0],13:[2,48,0],14:[2,48,0],15:[2,48,0],16:[2,48,0],17:[2,48,0],18:[2,48,0],19:[2,48,0],20:[2,48,0],21:[2,48,
0],22:[2,48,0],23:[2,48,0],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,38]},22:{8:[1,0,52]},23:{8:[2,22,0],9:[2,22,0],10:[2,22,0],11:[1,0,53],20:[2,22,0],24:[2,22,0],25:[2,22,0],26:[2,22,0],27:[2,22,0],29:[2,22,0],32:[2,22,0]},24:{8:[2,23,0],9:[2,23,0],10:[2,23,0],11:[2,23,0],12:[1,0,54],20:[2,23,0],24:[2,23,0],25:[2,23,0],26:[2,23,0],27:[2,23,0],29:[2,23,0],32:[2,23,0]},25:{8:[2,25,0],9:[2,25,0],10:[2,25,0],11:[2,25,0],12:[2,25,0],13:[1,0,55],14:[1,0,56],20:[2,25,0],24:[2,25,0],25:[2,
25,0],26:[2,25,0],27:[2,25,0],29:[2,25,0],32:[2,25,0]},26:{8:[2,27,0],9:[2,27,0],10:[2,27,0],11:[2,27,0],12:[2,27,0],13:[2,27,0],14:[2,27,0],15:[1,0,57],16:[1,0,58],17:[1,0,59],18:[1,0,60],20:[2,27,0],24:[2,27,0],25:[2,27,0],26:[2,27,0],27:[2,27,0],29:[2,27,0],32:[2,27,0]},27:{8:[2,30,0],9:[2,30,0],10:[2,30,0],11:[2,30,0],12:[2,30,0],13:[2,30,0],14:[2,30,0],15:[2,30,0],16:[2,30,0],17:[2,30,0],18:[2,30,0],19:[1,0,61],20:[2,30,0],24:[2,30,0],25:[2,30,0],26:[2,30,0],27:[2,30,0],29:[2,30,0],32:[2,30,
0]},28:{8:[2,35,0],9:[2,35,0],10:[2,35,0],11:[2,35,0],12:[2,35,0],13:[2,35,0],14:[2,35,0],15:[2,35,0],16:[2,35,0],17:[2,35,0],18:[2,35,0],19:[2,35,0],20:[2,35,0],21:[1,0,63],22:[1,0,64],23:[1,0,65],24:[2,35,0],25:[2,35,0],26:[2,35,0],27:[2,35,0],29:[2,35,0],32:[2,35,0]},29:{8:[2,38,0],9:[2,38,0],10:[2,38,0],11:[2,38,0],12:[2,38,0],13:[2,38,0],14:[2,38,0],15:[2,38,0],16:[2,38,0],17:[2,38,0],18:[2,38,0],19:[2,38,0],20:[2,38,0],21:[2,38,0],22:[2,38,0],23:[2,38,0],24:[2,38,0],25:[2,38,0],26:[2,38,0],
27:[2,38,0],29:[2,38,0],32:[2,38,0]},30:{8:[2,43,0],9:[2,43,0],10:[2,43,0],11:[2,43,0],12:[2,43,0],13:[2,43,0],14:[2,43,0],15:[2,43,0],16:[2,43,0],17:[2,43,0],18:[2,43,0],19:[2,43,0],20:[2,43,0],21:[2,43,0],22:[2,43,0],23:[2,43,0],24:[2,43,0],25:[2,43,0],26:[2,43,0],27:[2,43,0],29:[2,43,0],32:[2,43,0]},31:{8:[1,0,66]},32:{8:[1,0,67]},33:{8:[1,0,68]},34:{2:[1,0,1],3:[1,0,2],6:[1,0,3],7:[1,0,4]},35:{1:[2,4,0],2:[2,4,0],3:[2,4,0],4:[2,4,0],5:[2,4,0],6:[2,4,0],7:[2,4,0]},36:{4:[1,0,70]},37:{2:[2,8,0],
3:[2,8,0],6:[2,8,0],7:[2,8,0]},38:{8:[2,58,0],9:[2,58,0],11:[2,58,0],12:[2,58,0],13:[2,58,0],14:[2,58,0],15:[2,58,0],16:[2,58,0],17:[2,58,0],18:[2,58,0],19:[2,58,0],20:[2,58,0],21:[2,58,0],22:[2,58,0],23:[2,58,0],24:[2,58,0],25:[2,58,0],26:[2,58,0],27:[2,58,0],28:[1,0,72],29:[2,58,0],30:[2,58,0],31:[2,58,0]},39:{8:[2,48,0],9:[2,48,0],10:[2,48,0],11:[2,48,0],12:[2,48,0],13:[2,48,0],14:[2,48,0],15:[2,48,0],16:[2,48,0],17:[2,48,0],18:[2,48,0],19:[2,48,0],20:[2,48,0],21:[2,48,0],22:[2,48,0],23:[2,48,
0],24:[2,48,0],25:[2,48,0],26:[2,48,0],27:[2,48,0],29:[2,48,0],32:[2,48,0]},40:{8:[2,21,0],9:[2,21,0],20:[2,21,0],24:[2,21,0],25:[2,21,0],26:[2,21,0],27:[2,21,0],29:[2,21,0]},41:{8:[2,16,0],9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,38]},42:{8:[2,17,0]},43:{8:[2,20,0],9:[2,20,0],20:[2,20,0],24:[2,20,0],25:[2,20,0],26:[2,20,0],27:[2,20,0],29:[2,20,0]},44:{8:[2,50,0],29:[1,0,75]},45:{8:[2,52,0],29:[2,52,0]},46:{27:[1,0,77],29:[1,0,78]},47:{9:[1,0,14],20:[1,0,15],
24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},48:{10:[1,0,80]},49:{8:[2,46,0],9:[2,46,0],10:[2,46,0],11:[2,46,0],12:[2,46,0],13:[2,46,0],14:[2,46,0],15:[2,46,0],16:[2,46,0],17:[2,46,0],18:[2,46,0],19:[2,46,0],20:[2,46,0],21:[2,46,0],22:[2,46,0],23:[2,46,0],24:[2,46,0],25:[2,46,0],26:[2,46,0],27:[2,46,0],29:[2,46,0],32:[2,46,0]},50:{8:[2,42,0],9:[2,42,0],10:[2,42,0],11:[2,42,0],12:[2,42,0],13:[2,42,0],14:[2,42,0],15:[2,42,0],16:[2,42,0],17:[2,42,0],18:[2,42,0],19:[2,42,0],20:[2,42,0],
21:[2,42,0],22:[2,42,0],23:[2,42,0],24:[2,42,0],25:[2,42,0],26:[2,42,0],27:[2,42,0],29:[2,42,0],32:[2,42,0]},51:{1:[2,11,0],2:[2,11,0],3:[2,11,0],4:[2,11,0],5:[2,11,0],6:[2,11,0],7:[2,11,0]},52:{1:[2,13,0],2:[2,13,0],3:[2,13,0],4:[2,13,0],5:[2,13,0],6:[2,13,0],7:[2,13,0]},53:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},54:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},55:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,
0,18],27:[1,0,19],29:[1,0,10]},56:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},57:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},58:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},59:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},60:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},61:{9:[1,0,14],20:[1,0,15],24:[1,
0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},62:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},63:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},64:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},65:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},66:{1:[2,10,0],2:[2,10,0],3:[2,10,0],4:[2,10,0],5:[2,10,0],6:[2,10,0],7:[2,10,0]},67:{1:[2,12,
0],2:[2,12,0],3:[2,12,0],4:[2,12,0],5:[2,12,0],6:[2,12,0],7:[2,12,0]},68:{2:[2,14,0],3:[2,14,0],6:[2,14,0],7:[2,14,0]},69:{1:[2,1,0],2:[1,0,1],3:[1,0,2],4:[2,1,0],6:[1,0,3],7:[1,0,4]},70:{29:[1,0,10]},71:{1:[2,5,0],2:[2,5,0],3:[2,5,0],4:[2,5,0],5:[2,5,0],6:[2,5,0],7:[2,5,0]},72:{9:[1,0,14],20:[1,0,15],24:[1,0,16],25:[1,0,17],26:[1,0,18],27:[1,0,19],29:[1,0,10]},73:{8:[2,15,0]},74:{8:[2,19,0],9:[2,19,0],20:[2,19,0],24:[2,19,0],25:[2,19,0],26:[2,19,0],27:[2,19,0],29:[2,19,0]},75:{28:[1,0,72]},76:{8:[2,
51,0],29:[2,51,0]},77:{8:[2,57,0],9:[2,57,0],10:[2,57,0],11:[2,57,0],12:[2,57,0],13:[2,57,0],14:[2,57,0],15:[2,57,0],16:[2,57,0],17:[2,57,0],18:[2,57,0],19:[2,57,0],20:[2,57,0],21:[2,57,0],22:[2,57,0],23:[2,57,0],24:[2,57,0],25:[2,57,0],26:[2,57,0],27:[2,57,0],29:[2,57,0],30:[2,57,0],31:[2,57,0],32:[2,57,0]},78:{8:[2,55,0],9:[2,55,0],10:[2,55,0],11:[2,55,0],12:[2,55,0],13:[2,55,0],14:[2,55,0],15:[2,55,0],16:[2,55,0],17:[2,55,0],18:[2,55,0],19:[2,55,0],20:[2,55,0],21:[2,55,0],22:[2,55,0],23:[2,55,
0],24:[2,55,0],25:[2,55,0],26:[2,55,0],27:[2,55,0],29:[2,55,0],30:[2,55,0],31:[2,55,0],32:[2,55,0]},79:{32:[1,0,96]},80:{8:[2,49,0],9:[2,49,0],10:[2,49,0],11:[2,49,0],12:[2,49,0],13:[2,49,0],14:[2,49,0],15:[2,49,0],16:[2,49,0],17:[2,49,0],18:[2,49,0],19:[2,49,0],20:[2,49,0],21:[2,49,0],22:[2,49,0],23:[2,49,0],24:[2,49,0],25:[2,49,0],26:[2,49,0],27:[2,49,0],29:[2,49,0],32:[2,49,0]},81:{8:[2,24,0],9:[2,24,0],10:[2,24,0],11:[2,24,0],12:[1,0,54],20:[2,24,0],24:[2,24,0],25:[2,24,0],26:[2,24,0],27:[2,24,
0],29:[2,24,0],32:[2,24,0]},82:{8:[2,26,0],9:[2,26,0],10:[2,26,0],11:[2,26,0],12:[2,26,0],13:[1,0,55],14:[1,0,56],20:[2,26,0],24:[2,26,0],25:[2,26,0],26:[2,26,0],27:[2,26,0],29:[2,26,0],32:[2,26,0]},83:{8:[2,28,0],9:[2,28,0],10:[2,28,0],11:[2,28,0],12:[2,28,0],13:[2,28,0],14:[2,28,0],15:[1,0,57],16:[1,0,58],17:[1,0,59],18:[1,0,60],20:[2,28,0],24:[2,28,0],25:[2,28,0],26:[2,28,0],27:[2,28,0],29:[2,28,0],32:[2,28,0]},84:{8:[2,29,0],9:[2,29,0],10:[2,29,0],11:[2,29,0],12:[2,29,0],13:[2,29,0],14:[2,29,
0],15:[1,0,57],16:[1,0,58],17:[1,0,59],18:[1,0,60],20:[2,29,0],24:[2,29,0],25:[2,29,0],26:[2,29,0],27:[2,29,0],29:[2,29,0],32:[2,29,0]},85:{8:[2,32,0],9:[2,32,0],10:[2,32,0],11:[2,32,0],12:[2,32,0],13:[2,32,0],14:[2,32,0],15:[2,32,0],16:[2,32,0],17:[2,32,0],18:[2,32,0],19:[1,0,61],20:[2,32,0],24:[2,32,0],25:[2,32,0],26:[2,32,0],27:[2,32,0],29:[2,32,0],32:[2,32,0]},86:{8:[2,34,0],9:[2,34,0],10:[2,34,0],11:[2,34,0],12:[2,34,0],13:[2,34,0],14:[2,34,0],15:[2,34,0],16:[2,34,0],17:[2,34,0],18:[2,34,0],
19:[1,0,61],20:[2,34,0],24:[2,34,0],25:[2,34,0],26:[2,34,0],27:[2,34,0],29:[2,34,0],32:[2,34,0]},87:{8:[2,31,0],9:[2,31,0],10:[2,31,0],11:[2,31,0],12:[2,31,0],13:[2,31,0],14:[2,31,0],15:[2,31,0],16:[2,31,0],17:[2,31,0],18:[2,31,0],19:[1,0,61],20:[2,31,0],24:[2,31,0],25:[2,31,0],26:[2,31,0],27:[2,31,0],29:[2,31,0],32:[2,31,0]},88:{8:[2,33,0],9:[2,33,0],10:[2,33,0],11:[2,33,0],12:[2,33,0],13:[2,33,0],14:[2,33,0],15:[2,33,0],16:[2,33,0],17:[2,33,0],18:[2,33,0],19:[1,0,61],20:[2,33,0],24:[2,33,0],25:[2,
33,0],26:[2,33,0],27:[2,33,0],29:[2,33,0],32:[2,33,0]},89:{8:[2,36,0],9:[2,36,0],10:[2,36,0],11:[2,36,0],12:[2,36,0],13:[2,36,0],14:[2,36,0],15:[2,36,0],16:[2,36,0],17:[2,36,0],18:[2,36,0],19:[2,36,0],20:[2,36,0],21:[1,0,63],22:[1,0,64],23:[1,0,65],24:[2,36,0],25:[2,36,0],26:[2,36,0],27:[2,36,0],29:[2,36,0],32:[2,36,0]},90:{8:[2,37,0],9:[2,37,0],10:[2,37,0],11:[2,37,0],12:[2,37,0],13:[2,37,0],14:[2,37,0],15:[2,37,0],16:[2,37,0],17:[2,37,0],18:[2,37,0],19:[2,37,0],20:[2,37,0],21:[1,0,63],22:[1,0,64],
23:[1,0,65],24:[2,37,0],25:[2,37,0],26:[2,37,0],27:[2,37,0],29:[2,37,0],32:[2,37,0]},91:{8:[2,39,0],9:[2,39,0],10:[2,39,0],11:[2,39,0],12:[2,39,0],13:[2,39,0],14:[2,39,0],15:[2,39,0],16:[2,39,0],17:[2,39,0],18:[2,39,0],19:[2,39,0],20:[2,39,0],21:[2,39,0],22:[2,39,0],23:[2,39,0],24:[2,39,0],25:[2,39,0],26:[2,39,0],27:[2,39,0],29:[2,39,0],32:[2,39,0]},92:{8:[2,40,0],9:[2,40,0],10:[2,40,0],11:[2,40,0],12:[2,40,0],13:[2,40,0],14:[2,40,0],15:[2,40,0],16:[2,40,0],17:[2,40,0],18:[2,40,0],19:[2,40,0],20:[2,
40,0],21:[2,40,0],22:[2,40,0],23:[2,40,0],24:[2,40,0],25:[2,40,0],26:[2,40,0],27:[2,40,0],29:[2,40,0],32:[2,40,0]},93:{8:[2,41,0],9:[2,41,0],10:[2,41,0],11:[2,41,0],12:[2,41,0],13:[2,41,0],14:[2,41,0],15:[2,41,0],16:[2,41,0],17:[2,41,0],18:[2,41,0],19:[2,41,0],20:[2,41,0],21:[2,41,0],22:[2,41,0],23:[2,41,0],24:[2,41,0],25:[2,41,0],26:[2,41,0],27:[2,41,0],29:[2,41,0],32:[2,41,0]},94:{8:[1,0,97]},95:{8:[2,53,0],29:[2,53,0]},96:{8:[2,56,0],9:[2,56,0],10:[2,56,0],11:[2,56,0],12:[2,56,0],13:[2,56,0],14:[2,
56,0],15:[2,56,0],16:[2,56,0],17:[2,56,0],18:[2,56,0],19:[2,56,0],20:[2,56,0],21:[2,56,0],22:[2,56,0],23:[2,56,0],24:[2,56,0],25:[2,56,0],26:[2,56,0],27:[2,56,0],29:[2,56,0],30:[2,56,0],31:[2,56,0],32:[2,56,0]},97:{1:[2,9,0],2:[2,9,0],3:[2,9,0],4:[2,9,0],5:[2,9,0],6:[2,9,0],7:[2,9,0]}}};h.parse=function(b){var d=this,g=d.lexer,e,i,h=d.table,t=h.gotos,h=h.action,u=d.productions,m=[null],j=[0];for(g.resetInput(b);;){b=j[j.length-1];e||(e=g.lex());if(!e)return!1;i=h[b]&&h[b][e];if(!i){var r=[];h[b]&&
a.each(h[b],function(f,q){r.push(d.lexer.mapReverseSymbol(q))});g.showDebugInfo();r.join(", ");return!1}switch(i[0]){case 1:j.push(e);m.push(g.text);j.push(i[2]);e=null;break;case 2:var k=u[i[1]],b=k.symbol||k[0];i=k.action||k[2];var n=(k.rhs||k[1]).length,f=0,q=void 0,k=m[m.length-n];for(d.$$=k;f<n;f++)d["$"+(n-f)]=m[m.length-1-f];i&&(q=i.call(d));k=void 0!==q?q:d.$$;n&&(j=j.slice(0,-2*n),m=m.slice(0,-1*n));j.push(b);m.push(k);j.push(t[j[j.length-2]][j[j.length-1]]);break;case 0:return k}}};return h});
KISSY.add("xtemplate/compiler/ast",function(h){var a={ProgramNode:function(a,e,b){this.lineNumber=a;this.statements=e;this.inverse=b}};a.ProgramNode.prototype.type="program";a.BlockNode=function(a,e,b,d){h.equals(e.path.parts,d.parts);this.lineNumber=a;this.tpl=e;this.program=b};a.BlockNode.prototype.type="block";a.TplNode=function(a,e,b,d){this.lineNumber=a;this.path=e;this.params=b;this.hash=d;this.escaped=!0;this.isInverted=!1};a.TplNode.prototype.type="tpl";a.TplExpressionNode=function(a,e){this.lineNumber=
a;this.expression=e;this.escaped=!0};a.TplExpressionNode.prototype.type="tplExpression";a.ContentNode=function(a,e){this.lineNumber=a;this.value=e};a.ContentNode.prototype.type="content";a.UnaryExpression=function(a){this.value=a};a.UnaryExpression.prototype.type="unaryExpression";a.MultiplicativeExpression=function(a,e,b){this.op1=a;this.opType=e;this.op2=b};a.MultiplicativeExpression.prototype.type="multiplicativeExpression";a.AdditiveExpression=function(a,e,b){this.op1=a;this.opType=e;this.op2=
b};a.AdditiveExpression.prototype.type="additiveExpression";a.RelationalExpression=function(a,e,b){this.op1=a;this.opType=e;this.op2=b};a.RelationalExpression.prototype.type="relationalExpression";a.EqualityExpression=function(a,e,b){this.op1=a;this.opType=e;this.op2=b};a.EqualityExpression.prototype.type="equalityExpression";a.ConditionalAndExpression=function(a,e){this.op1=a;this.op2=e};a.ConditionalAndExpression.prototype.type="conditionalAndExpression";a.ConditionalOrExpression=function(a,e){this.op1=
a;this.op2=e};a.ConditionalOrExpression.prototype.type="conditionalOrExpression";a.StringNode=function(a,e){this.lineNumber=a;this.value=e};a.StringNode.prototype.type="string";a.NumberNode=function(a,e){this.lineNumber=a;this.value=e};a.NumberNode.prototype.type="number";a.BooleanNode=function(a,e){this.lineNumber=a;this.value=e};a.BooleanNode.prototype.type="boolean";a.HashNode=function(a,e){var b={};this.lineNumber=a;h.each(e,function(a){b[a[0]]=a[1]});this.value=b};a.HashNode.prototype.type="hash";
a.IdNode=function(a,e){var b=[],d=0;this.lineNumber=a;h.each(e,function(a){".."==a?d++:b.push(a)});this.parts=b;this.string=b.join(".");this.depth=d};a.IdNode.prototype.type="id";return a});
KISSY.add("xtemplate/compiler",function(h,a,i,e){function b(f,a){return d(f.replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t"),a)}function d(f,a){return f.replace(a?t:u,function(f){f.length%2&&(f="\\"+f);return f})}function g(f,a){m.apply(f,a)}function o(f){return f[f.length-1]}function p(f,a,c){var b="tmp"+j++;c.push("var "+b+" = "+f+";");c.push("buffer+="+(a?"escapeHTML(":"")+"("+b+'===undefined?"":'+b+')+""'+(a?")":"")+";")}a.yy=i;var w={getProperty:1},t=/\\*"/g,u=/\\*'/g,m=[].push,
j=0,r=0;e.includeCommand.invokeEngine=function(f,a,c){"string"==typeof f&&(f=n.compileToFn(f,c));return(new e(f,h.merge(c))).render(a)};var k={genFunction:function(f,a){var c=[];a||c.push("function(scopes) {");c.push('var buffer = ""'+(a?",":";"));if(a){c.push("S = KISSY,escapeHTML = S.escapeHTML,isArray = S.isArray,isObject = S.isObject,log = S.log,commands = option.commands,utils = option.utils,error = S.error;");var b="",d,v=e.commands;for(d in v)b+=d+'Command = commands["'+d+'"],';for(d in w)b+=
d+' = utils["'+d+'"],';b&&c.push("var "+b.slice(0,b.length-1))}if(f){b=0;for(d=f.length;b<d;b++)g(c,this[f[b].type](f[b]))}c.push("return buffer;");return!a?(c.push("}"),c):{params:["scopes","option","undefined"],source:c}},genId:function(f,a){var c=[],b=f.depth,d=f.string,v=f.parts,s="id"+j++,l=0,h;h=e.commands;c.push("var "+s+";");if(a&&0==b){var i=this.genOption(a);g(c,i[1]);(l=h[d])?h=d+"Command":(h="command"+j++,c.push("var "+h+";"),c.push(h+' = commands["'+d+'"];'),c.push("if( "+h+" ){"));c.push("try{");
c.push(s+" = "+h+"(scopes,"+i[0]+");");c.push("}catch(e){");c.push("error(e.message+\": '"+d+"' at line "+f.lineNumber+'");');c.push("}");l||(c.push("}"),c.push("else {"))}l||(l="tmp"+j++,d=this.getIdStringFromIdParts(c,v),c.push("var "+l+' = getProperty("'+d+'",scopes,'+b+");"),c.push("if("+l+"===false){"),c.push('S[option.silent?"log":"error"]("can not find property: \''+d+"' at line "+f.lineNumber+'", "warn");'),c.push("} else {"),c.push(s+" = "+l+"[0];"),c.push("}"),a&&0==b&&c.push("}"));return[s,
c]},genOpExpression:function(f,a){var c=[],b,d,e=this[f.op1.type](f.op1),h=this[f.op2.type](f.op2);b=e[0];d=h[0];if(b&&d)return g(c,e[1]),g(c,h[1]),c.push(b+a+d),["",c];if(!b&&!d)return g(c,e[1].slice(0,-1)),g(c,h[1].slice(0,-1)),c.push("("+o(e[1])+")"+a+"("+o(h[1])+")"),["",c];if(b&&!d)return g(c,e[1]),g(c,h[1].slice(0,-1)),c.push(b+a+"("+o(h[1])+")"),["",c];if(!b&&d)return g(c,e[1].slice(0,-1)),g(c,h[1]),c.push("("+o(e[1])+")"+a+d),["",c]},genOption:function(f){var a=[],c="option"+j++,b,d=this;
a.push("var "+c+" = S.merge(option);");if(f){if(b=f.params){var e="params"+j++;a.push("var "+e+" = [];");h.each(b,function(f){f=d[f.type](f);f[0]?(g(a,f[1]),a.push(e+".push("+f[0]+");")):(g(a,f[1].slice(0,-1)),a.push(e+".push("+o(f[1])+");"))});a.push(c+".params="+e+";")}if(f=f.hash){var i="hash"+j++;a.push("var "+i+" = {};");h.each(f.value,function(f,c){var b=d[f.type](f);b[0]?(g(a,b[1]),a.push(i+'["'+c+'"] = '+b[0]+";")):(g(a,b[1].slice(0,-1)),a.push(i+'["'+c+'"] = '+o(b[1])+";"))});a.push(c+".hash="+
i+";")}}return[c,a]},conditionalOrExpression:function(f){return this.genOpExpression(f,"||")},conditionalAndExpression:function(f){return this.genOpExpression(f,"&&")},relationalExpression:function(f){return this.genOpExpression(f,f.opType)},equalityExpression:function(f){return this.genOpExpression(f,f.opType)},additiveExpression:function(f){return this.genOpExpression(f,f.opType)},multiplicativeExpression:function(f){return this.genOpExpression(f,f.opType)},unaryExpression:function(f){var a=[],
c,f=this[f.value.type](f.value);m.apply(a,f[1]);(c=f[0])?a.push(c+"=!"+c+";"):a[a.length-1]="!"+o(a);return[c,a]},string:function(a){return["",["'"+b(a.value)+"'"]]},number:function(a){return["",[a.value]]},"boolean":function(a){return["",[a.value]]},id:function(a){return this.genId(a)},block:function(a){var b=a.program,c=[],d,a=a.tpl,h=this.genOption(a),i=h[0];d=e.commands;var k=a.path.string;g(c,h[1]);c.push(i+".fn="+this.genFunction(b.statements).join("\n")+";");b.inverse&&(b=this.genFunction(b.inverse).join("\n"),
c.push(i+".inverse="+b+";"));a.isInverted&&(b="inverse"+j++,c.push("var "+b+"="+i+".fn;"),c.push(i+".fn = "+i+".inverse;"),c.push(i+".inverse = "+b+";"));if(b=d[k])d=k+"Command";else{d="command"+j++;c.push("var "+d+' = commands["'+k+'"];');if(!a.hash&&!a.params){c.push("if(!"+d+"){");var k=this.getIdStringFromIdParts(c,a.path.parts),l="propertyValueHolder"+j++;c.push("var "+l+' = getProperty("'+k+'",scopes);');h="variableName"+j++;c.push("var "+h+"="+l+"&&"+l+"[0];");c.push(i+".params=["+h+"];");
c.push("if(isArray("+h+")){");c.push(d+'=commands["each"];');c.push("}");c.push("else if(isObject("+h+")){");c.push(d+'=commands["with"];');c.push("}");c.push("else {");c.push(d+'=commands["if"];');c.push("}");c.push("}")}c.push("if( "+d+" ){")}c.push("try{");c.push("buffer += "+d+"(scopes,"+i+");");c.push("}catch(e){");c.push("error(e.message+\": '"+k+"' at line "+a.path.lineNumber+'");');c.push("}");b||(c.push("}"),c.push("if("+l+"===false) {"),c.push('S[option.silent?"log":"error"]("can not find command: \''+
k+"' at line "+a.path.lineNumber+'","warn");'),c.push("}"));return c},content:function(a){return["buffer += '"+b(a.value)+"';"]},tpl:function(a){var b=[],c=a.escaped,a=this.genId(a.path,a);g(b,a[1]);p(a[0],c,b);return b},tplExpression:function(a){var b=[],c=a.escaped,a=this[a.expression.type](a.expression);a[0]?(g(b,a[1]),a=a[0]):(g(b,a[1].slice(0,-1)),a=o(a[1]));p(a,c,b);return b},getIdStringFromIdParts:function(a,b){var c="",d,e,h=!0;for(d=0;d<b.length;d++)e=b[d],h||(c+="."),e.type?(e=this[e.type](e),
e[0]&&(g(a,e[1]),c+='"+'+e[0]+'+"',h=!0)):(c+=e,h=!1);return c}},n;return n={parse:function(b){return a.parse(b)},compileToStr:function(a){a=this.compile(a);return"function("+a.params.join(",")+"){\n"+a.source.join("\n")+"}"},compile:function(a){a=this.parse(a);j=0;return k.genFunction(a.statements,!0)},compileToFn:function(a,b){var c=n.compile(a),b=b||{};return Function.apply(null,[].concat(c.params).concat(c.source.join("\n")+"//@ sourceURL="+(b.name?b.name:"xtemplate"+r++)+".js"))}}},{requires:["./compiler/parser",
"./compiler/ast","xtemplate/runtime"]});
