/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jun 7 13:42
*/
KISSY.add("component/base/manager",function(){var f=0,e={},c={};return{__instances:c,addComponent:function(a,f){c[a]=f},removeComponent:function(a){delete c[a]},getComponent:function(a){return c[a]},getXClassByConstructor:function(a){for(var f in e)if(e[f].constructor==a)return f;return 0},getConstructorByXClass:function(a){var a=a.split(/\s+/),f=-1,c,k,i,h=null;for(k=0;k<a.length;k++)if((i=e[a[k]])&&(c=i.priority)>f)f=c,h=i.constructor;return h},setConstructorByXClass:function(a,c){e[a]={constructor:c,
priority:f++}}}});
KISSY.add("component/base/uibase",function(f,e,c,a,n){var c=f.noop,g=e.extend({constructor:function(){var a;g.superclass.constructor.apply(this,arguments);this.decorateInternal&&(a=this.get("srcNode"))&&this.decorateInternal(a);this.get("autoRender")&&this.render()},bindInternal:c,syncInternal:c,initializer:function(){var i,h=f.one(this.get("srcNode"));(i=this.get("id"))&&a.addComponent(i,this);if(h){var b=this.constructor,o,j;j=this.collectConstructorChains();for(i=j.length-1;0<=i;i--)if(b=j[i],
o=b.HTML_PARSER){var b=h,c=void 0,d=void 0,d=void 0;for(c in o)d=o[c],f.isFunction(d)?(d=d.call(this,b),d!==n&&this.setInternal(c,d)):"string"==typeof d?this.setInternal(c,b.one(d)):f.isArray(d)&&d[0]&&this.setInternal(c,b.all(d[0]))}this.setInternal("srcNode",h)}},create:function(){this.get("created")||(this.fire("beforeCreateDom"),this.callMethodByHierarchy("createDom","__createDom"),this.setInternal("created",!0),this.fire("afterCreateDom"),this.callPluginsMethod("createDom"));return this},render:function(){this.get("rendered")||
(this.create(n),this.fire("beforeRenderUI"),this.callMethodByHierarchy("renderUI","__renderUI"),this.fire("afterRenderUI"),this.callPluginsMethod("renderUI"),this.fire("beforeBindUI"),g.superclass.bindInternal.call(this),this.callMethodByHierarchy("bindUI","__bindUI"),this.fire("afterBindUI"),this.callPluginsMethod("bindUI"),g.superclass.syncInternal.call(this),this.sync(),this.setInternal("rendered",!0));return this},sync:function(){this.fire("beforeSyncUI");this.callMethodByHierarchy("syncUI","__syncUI");
this.fire("afterSyncUI");this.callPluginsMethod("syncUI")},createDom:c,renderUI:c,bindUI:c,syncUI:c,plug:function(){var a;a=this.get("plugins");g.superclass.plug.apply(this,arguments);a=a[a.length-1];this.get("rendered")?(a.pluginCreateDom&&a.pluginCreateDom(this),a.pluginRenderUI&&a.pluginRenderUI(this),a.pluginBindUI&&a.pluginBindUI(this),a.pluginSyncUI&&a.pluginSyncUI(this)):this.get("created")&&a.pluginCreateDom&&a.pluginCreateDom(this);return this},destructor:function(){var c;(c=this.get("id"))&&
a.removeComponent(c)}},{name:"UIBase",ATTRS:{rendered:{value:!1},created:{value:!1},xclass:{valueFn:function(){return a.getXClassByConstructor(this.constructor)}}}}),k=g.extend;f.mix(g,{HTML_PARSER:{},extend:function h(b,c,j){var l=f.makeArray(arguments),d={},g,e=l.length;if(g=l[e-1].xclass)l[e-2].name=g;l=k.apply(this,l);f.isArray(b)&&(f.each(b.concat(l),function(b){b&&f.each(b.HTML_PARSER,function(b,t){d[t]=b})}),l.HTML_PARSER=d);g&&a.setConstructorByXClass(g,l);l.extend=h;return l}});return g},
{requires:["rich-base","node","./manager"]});KISSY.add("component/base/impl",function(f,e,c){return{Manager:c,UIBase:e,create:function(a,e){var g;if(a){!a.isController&&e&&(f.mix(a,e.get("defaultChildCfg"),!1),!a.xclass&&a.prefixXClass&&(a.xclass=a.prefixXClass,a.xtype&&(a.xclass+="-"+a.xtype)));if(!a.isController&&(g=a.xclass))g=c.getConstructorByXClass(g),a=new g(a);a.isController&&e&&a.setInternal("parent",e)}return a}}},{requires:["./uibase","./manager"]});
KISSY.add("component/base/box",function(f){function e(){}e.ATTRS={id:{view:1,valueFn:function(){return f.guid("ks-component")}},content:{view:1,value:""},contentTpl:{view:1},renderData:{view:1,value:{}},childrenElSelectors:{view:1},width:{view:1},height:{view:1},elCls:{view:1,value:[],setter:function(c){"string"==typeof c&&(c=c.split(/\s+/));return c||[]}},elStyle:{view:1,value:{}},elAttrs:{view:1,value:{}},elBefore:{view:1},el:{view:1},render:{view:1},visible:{sync:0,value:!0,view:1},srcNode:{view:1}};
e.prototype={_onSetVisible:function(c){this.fire(c?"show":"hide")},show:function(){this.render();this.set("visible",!0);return this},hide:function(){this.set("visible",!1);return this}};return e});KISSY.add("component/base/box-tpl",function(){return'<div id="{{id}}" class="{{getBaseCssClasses ""}} {{#each elCls}} {{.}} {{/each}} " {{#each elAttrs}} {{xkey}}="{{.}}" {{/each}} style=" {{#each elStyle}} {{xkey}}:{{.}}; {{/each}} ">'});
KISSY.add("component/base/box-render",function(f,e,c,a){function n(b){"number"==typeof b&&(b+="px");return b}function g(){var b,a,h=this.get("elStyle"),c=this.get("elCls"),d;if(!this.get("srcNode")){b=this.getAttrs();d=this.get("renderData");for(a in b)"renderData"!=a&&!(a in d)&&(d[a]=this.get(a));b=d.width;a=d.height;d=d.visible;b&&(h.width=n(b));a&&(h.height=n(a));d||c.push(this.getBaseCssClasses("hidden"))}}var k=f.all,i=f.UA,h=f.Env.host.document;g.ATTRS={id:{},el:{},elCls:{sync:0},elStyle:{sync:0},
width:{sync:0},height:{sync:0},elAttrs:{sync:0},elBefore:{sync:0},render:{},visible:{sync:0},contentTpl:{value:"{{{content}}}"},renderData:{},childrenElSelectors:{value:{}}};g.HTML_PARSER={id:function(b){return(b=b[0].id)?b:void 0},content:function(b){return b.html()}};g.prototype={__createDom:function(){var b=this,h=b.get("renderData"),j;if(j=b.get("srcNode")){if((j=k(j))&&!j[0].id)j[0].id=b.get("id")}else{j=a+b.get("contentTpl")+"</div>";j=(new c(j,{commands:{getBaseCssClasses:function(a,h){return b.getBaseCssClasses(h.params[0])}}})).render(h);
j=k(j);var h=b.get("childrenElSelectors"),e;for(e in h){var d=h[e];"function"===typeof d?b.setInternal(e,d(j)):b.setInternal(e,j.all(f.substitute(d,this.get("renderData"))))}}b.setInternal("el",j)},__renderUI:function(){if(!this.get("srcNode")){var b=this.get("render"),a=this.get("el"),c=this.get("elBefore");c?a.insertBefore(c,void 0):b?a.appendTo(b,void 0):a.appendTo(h.body,void 0)}},_onSetWidth:function(a){this.get("el").width(a)},_onSetHeight:function(a){this.get("el").height(a)},_onSetContent:function(a){var h=
this.get("el");h.html(a);9>i.ie&&!this.get("allowTextSelection")&&h.unselectable()},_onSetVisible:function(a){var h=this.get("el"),c=this.getBaseCssClasses("hidden");a?h.removeClass(c):h.addClass(c)},__destructor:function(){var a=this.get("el");a&&a.remove()}};return g},{requires:["node","xtemplate","./box-tpl"]});
KISSY.add("component/base/render",function(f,e,c,a){function n(a){a||(a=[""]);"string"==typeof a&&(a=a.split(/\s+/));return a}function g(a,b,c){for(var f="",e=0,d=c.length,b=a+b;e<d;e++)a=(a=c[e])?"-"+a:a,f+=" "+b+a;return f}var k=f.trim,i;return i=a.extend([e],{initializer:function(){var a=this.get("elAttrs"),b=this.get("elCls"),c;if(c=this.get("disabled"))b.push(this.getBaseCssClasses("disabled")),a["aria-disabled"]="true";this.get("highlighted")&&b.push(this.getBaseCssClasses("hover"));this.get("focusable")&&
(a.hideFocus="true",a.tabindex=c?"-1":"0")},isRender:1,getBaseCssClasses:function(a){return i.getBaseCssClasses(this,a)},getBaseCssClass:function(a){return i.getBaseCssClass(this,a)},getKeyEventTarget:function(){return this.get("el")},_onSetHighlighted:function(a){var b=this.getBaseCssClasses("hover");this.get("el")[a?"addClass":"removeClass"](b)},_onSetDisabled:function(a){var b=this.getBaseCssClasses("disabled");this.get("el")[a?"addClass":"removeClass"](b).attr("aria-disabled",a);this.get("focusable")&&
this.getKeyEventTarget().attr("tabindex",a?-1:0)},_onSetActive:function(a){var b=this.getBaseCssClasses("active");this.get("el")[a?"addClass":"removeClass"](b).attr("aria-pressed",!!a)},_onSetFocused:function(a){var b=this.get("el"),c=this.getBaseCssClasses("focused");b[a?"addClass":"removeClass"](c)},getChildrenContainerEl:function(){return this.get("el")}},{getBaseCssClasses:function(a,b){for(var b=n(b),c=a.componentCssClasses,f=0,e="",d=c.length,i=a.prefixCls;f<d;f++)e+=g(i,c[f],b);return k(e)},
getBaseCssClass:function(a,b){return k(g(a.prefixCls,a.componentCssClasses[0],n(b)))},ATTRS:{prefixCls:{setter:function(a){this.prefixCls=a}},componentCssClasses:{setter:function(a){this.componentCssClasses=a}},focusable:{},focused:{sync:0},active:{sync:0},disabled:{sync:0},highlighted:{sync:0}},HTML_PARSER:{disabled:function(a){return a.hasClass(this.getBaseCssClass("disabled"))}}})},{requires:["./box-render","./impl","./uibase"]});
KISSY.add("component/base/controller",function(f,e,c,a,n,g,k,i){function h(a){return function(m){this==m.target&&(m=m.newVal,this.get("view").set(a,m))}}function b(a){return function(m){var b,c=this.get("view");c&&(b=c.get(a));return b===i?m:b}}function o(a){if(a.target===this){var m=a.component,b=this.get("children"),a=a.index;b.splice(a,0,m);this.get("rendered")&&(m=this.renderChild(m,a));this.fire("afterAddChild",{component:m,index:a})}}function j(a){if(a.target===this){var b=a.component,c,f,d=
a.destroy,e=this.get("children"),a=a.index;-1!=a&&e.splice(a,1);b.setInternal&&b.setInternal("parent",null);if(d)b.destroy&&b.destroy();else if(b.get&&(c=b.get("el")))c=c[0],(f=c.parentNode)&&f.removeChild(c);this.fire("afterRemoveChild",{component:b,index:a})}}function l(a){var c,d,e,g={},j,k=a.get("xrender");c=a.getAttrs();for(e in c)if(d=c[e],d.view){if((j=a.get(e))!==i)g[e]=j;a.on("after"+f.ucfirst(e)+"Change",h(e));d.getter=b(e)}return new k(g)}function d(a,b){return function(c){if(!a.get("disabled"))a[b](c)}}
var r=f.Env.host.document.documentMode||f.UA.ie,p=c.Gesture,q=f.Features.isTouchEventSupported(),s=n.extend([e],{isController:!0,getBaseCssClass:function(a){return k.getBaseCssClass(this,a)},initializer:function(){var a,b=this.get("defaultChildCfg");a=this.prefixCls=this.get("prefixCls");this.componentCssClasses=this.get("componentCssClasses");this.publish("beforeAddChild",{defaultFn:o});this.publish("beforeRemoveChild",{defaultFn:j});b.prefixCls=b.prefixCls||a},createChild:function(b){return a.create(b,
this)},createDom:function(){var a;this.setInternal("view",a=l(this));a.create();a=a.getKeyEventTarget();this.get("allowTextSelection")||a.unselectable()},renderUI:function(){this.get("view").render();this.renderChildren()},bindUI:function(){var a=this.getKeyEventTarget();if(this.get("focusable"))a.on("focus",d(this,"handleFocus")).on("blur",d(this,"handleBlur")).on("keydown",d(this,"handleKeydown"));if(this.get("handleMouseEvents")){a=this.get("el");if(!q)a.on("mouseenter",d(this,"handleMouseEnter")).on("mouseleave",
d(this,"handleMouseLeave")).on("contextmenu",d(this,"handleContextMenu"));a.on(p.start,d(this,"handleMouseDown")).on(p.end,d(this,"handleMouseUp")).on(p.tap,d(this,"performActionInternal"));if(p.cancel)a.on(p.cancel,d(this,"handleMouseUp"));if(r&&9>r)a.on("dblclick",d(this,"handleDblClick"))}},renderChildren:function(){var a,b=this.get("children");for(a=0;a<b.length;a++)this.renderChild(b[a],a)},_onSetFocused:function(a){var b=this.getKeyEventTarget()[0];a?b.focus():b.ownerDocument.activeElement==
b&&b.ownerDocument.body.focus()},focus:function(){this.get("focusable")&&this.set("focused",!0)},blur:function(){this.get("focusable")&&this.set("focused",!1)},getChildrenContainerEl:function(){return this.get("view").getChildrenContainerEl()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(a,b){var c=this.get("children");b===i&&(b=c.length);a=this.createChild(a);this.fire("beforeAddChild",{component:a,index:b});return a},renderChild:function(a,b){var c,
e;c=this.get("children");var d;"undefined"===typeof b&&(b=f.indexOf(a,c));a=this.createChild(a);c[b]=a;this.create();d=this.getChildrenContainerEl();e=d[0];c=e.children[b]||null;a.get("rendered")?(d=a.get("el")[0],d.parentNode!=e&&e.insertBefore(d,c)):(c?a.set("elBefore",c):a.set("render",d),a.render());this.fire("afterRenderChild",{component:a,index:b});return a},removeChild:function(a,b){b===i&&(b=!0);this.fire("beforeRemoveChild",{component:a,index:f.indexOf(a,this.get("children")),destroy:b})},
removeChildren:function(a){var b,c=[].concat(this.get("children"));for(b=0;b<c.length;b++)this.removeChild(c[b],a);return this},getChildAt:function(a){return this.get("children")[a]||null},handleDblClick:function(a){this.performActionInternal(a)},handleMouseEnter:function(a){this.set("highlighted",!!a)},handleMouseLeave:function(a){this.set("active",!1);this.set("highlighted",!a)},handleMouseDown:function(a){var b;if(1==a.which||q)if(b=this.getKeyEventTarget(),this.get("activeable")&&this.set("active",
!0),this.get("focusable")&&(b[0].focus(),this.set("focused",!0)),!this.get("allowTextSelection"))b=(b=a.target.nodeName)&&b.toLowerCase(),"input"!=b&&"textarea"!=b&&a.preventDefault()},handleMouseUp:function(a){this.get("active")&&(1==a.which||q)&&this.set("active",!1)},handleContextMenu:function(){},handleFocus:function(a){this.set("focused",!!a);this.fire("focus")},handleBlur:function(a){this.set("focused",!a);this.fire("blur")},handleKeyEventInternal:function(a){return a.keyCode==c.KeyCode.ENTER?
this.performActionInternal(a):i},handleKeydown:function(a){return this.handleKeyEventInternal(a)?(a.halt(),!0):i},performActionInternal:function(){},destructor:function(){var a,b=this.get("view"),c=this.get("children");for(a=0;a<c.length;a++)c[a].destroy&&c[a].destroy();b&&b.destroy()}},{ATTRS:{handleMouseEvents:{value:!0},focusable:{value:!0,view:1},allowTextSelection:{view:1,value:!1},activeable:{value:!0},focused:{view:1},active:{view:1,value:!1},highlighted:{view:1,value:!1},children:{value:[]},
prefixCls:{value:f.config("component/prefixCls")||"ks-",view:1},prefixXClass:{},parent:{setter:function(a,b){(b=this.get("parent"))&&this.removeTarget(b);a&&this.addTarget(a)}},disabled:{view:1,value:!1},xrender:{value:k},componentCssClasses:{view:1,valueFn:function(){for(var a=this.constructor,b,c=[];a&&a!=s;)(b=g.getXClassByConstructor(a))&&c.push(b),a=a.superclass&&a.superclass.constructor;return c}},defaultChildCfg:{view:1,value:{}}}},{xclass:"controller"});return s},{requires:"./box,node,./impl,./uibase,./manager,./render".split(",")});
KISSY.add("component/base",function(f,e,c,a){f.mix(e,{Controller:c,Render:a});return e},{requires:["./base/impl","./base/controller","./base/render"]});
